{"version":3,"sources":["../modules/shared.js"],"names":[],"mappings":"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","file":"shared.js","sourcesContent":["import {extent} from 'd3-array';\nimport {linear, ordinal} from 'd3-scale';\nimport {time} from 'd3';\n\nexport function reduce(x) {\n  let rVal = x;\n  for (let i = 1; i < arguments.length; i++) {\n    rVal -= arguments[i];\n  }\n  return rVal;\n}\n\nexport function getValueFunction(scale, type, dateParser) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  switch (type) {\n    case 'time':\n      return (d) => dateParser(d[dataIndex]);\n    default:\n      return (d) => d[dataIndex];\n  }\n}\n\nexport function getRandomId() {\n  return Math.floor(Math.random() * new Date().getTime());\n}\n\nexport function calcMargin(axes, margin) {\n  if (margin) return margin;\n  return axes ? {top: 20, right: 20, bottom: 50, left: 50} : {top: 0, right: 0, bottom: 0, left: 0};\n}\n\nexport function findLargestExtent(data, valueFunction) {\n  let low;\n  let high;\n  data.map((dataElement) => {\n    const calcDomainRange = extent(dataElement, valueFunction);\n    low = low < calcDomainRange[0] ? low : calcDomainRange[0];\n    high = high > calcDomainRange[1] ? high : calcDomainRange[1];\n  });\n  return [low, high];\n}\n\nexport function calcDefaultDomain(domainRange, type, dateParser) {\n  if (!domainRange) return null;\n  switch (type) {\n    case 'time':\n      return [dateParser(domainRange[0]), dateParser(domainRange[1])];\n    default:\n      return domainRange;\n  }\n}\n\nexport function setLineDomainAndRange(scale, domainRange, data, type, length, parseDate) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  let d3Axis;\n  switch (type) {\n    case 'text':\n      d3Axis = ordinal();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        data[0].map((d) => d[dataIndex])\n      );\n\n      d3Axis.rangePoints([0, length], 0);\n      break;\n    case 'linear':\n      d3Axis = linear();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    case 'time':\n      d3Axis = time.scale();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    default:\n      break;\n  }\n  return d3Axis;\n}\n"]}